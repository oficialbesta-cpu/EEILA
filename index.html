<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ERRO 404</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #1e1e1e;
        color: #f0f0f0;
    }
    header {
        background-color: #ff4c4c;
        padding: 20px;
        text-align: center;
        font-size: 2em;
        font-weight: bold;
    }
    .container {
        padding: 20px;
    }
    .input-group {
        display: flex;
        margin-bottom: 10px;
    }
    .input-group input {
        flex: 1;
        padding: 10px;
        font-size: 1em;
        border: none;
        border-radius: 5px 0 0 5px;
    }
    .input-group button {
        padding: 10px 20px;
        border: none;
        background-color: #ff4c4c;
        color: white;
        cursor: pointer;
        border-radius: 0 5px 5px 0;
    }
    .response-box {
        background-color: #2e2e2e;
        padding: 20px;
        border-radius: 5px;
        position: relative;
        min-height: 100px;
    }
    .copy-btn {
        position: absolute;
        top: 10px;
        right: 10px;
        background-color: #ff4c4c;
        border: none;
        color: white;
        padding: 5px 10px;
        cursor: pointer;
        border-radius: 5px;
    }
    .dev-panel {
        position: fixed;
        top: 0;
        right: -400px;
        width: 400px;
        height: 100%;
        background-color: #333;
        padding: 20px;
        transition: right 0.3s;
        overflow-y: auto;
        z-index: 100;
    }
    .dev-panel.active {
        right: 0;
    }
    .dev-panel h2 {
        margin-top: 0;
    }
    .dev-panel input, .dev-panel textarea, .dev-panel button {
        width: 100%;
        margin-bottom: 10px;
        padding: 10px;
        border-radius: 5px;
        border: none;
        font-size: 1em;
    }
    .dev-btn {
        position: fixed;
        top: 20px;
        left: 20px;
        padding: 10px 15px;
        background-color: #ff4c4c;
        border: none;
        color: white;
        cursor: pointer;
        border-radius: 5px;
        z-index: 101;
    }
</style>
</head>
<body>

<header>ERRO 404</header>

<button class="dev-btn" onclick="toggleDevPanel()">DEV</button>

<div class="container">
    <div class="input-group">
        <input type="text" id="userInput" placeholder="Digite sua mensagem...">
        <button onclick="sendMessage()">Enviar</button>
    </div>
    <div class="response-box" id="responseBox">
        <button class="copy-btn" onclick="copyResponse()">CÓPIA</button>
        <div id="responseText"></div>
    </div>
</div>

<div class="dev-panel" id="devPanel">
    <h2>DEV PANEL</h2>
    <label for="prompt">PROMPT</label>
    <textarea id="prompt" rows="4" placeholder="Digite new prompt..."></textarea>
    
    <label for="apiKey">API KEY</label>
    <input type="text" id="apiKey" placeholder="Colocar API Key do Google">
    
    <button onclick="saveAll()">SALVAR TUDO</button>
</div>

<script>
let devPanel = document.getElementById('devPanel');
let promptText = "";
let apiKey = "";

function toggleDevPanel() {
    devPanel.classList.toggle('active');
}

async function sendMessage() {
    let input = document.getElementById('userInput').value;
    if(!input) return alert("Digite algo!");
    if(!apiKey) return alert("Coloque sua API Key no painel DEV antes de enviar.");

    document.getElementById('responseText').innerText = "Carregando...";

    try {
        const response = await fetch("https://generativelanguage.googleapis.com/v1beta2/models/text-bison-001:generateText", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "Authorization": `Bearer ${apiKey}`
            },
            body: JSON.stringify({
                prompt: {
                    text: (promptText ? promptText + "\n" : "") + input
                },
                temperature: 0.7,
                maxOutputTokens: 500
            })
        });

        const data = await response.json();
        if(data.candidates && data.candidates[0] && data.candidates[0].content){
            document.getElementById('responseText').innerText = data.candidates[0].content;
        } else {
            document.getElementById('responseText').innerText = "Erro na resposta da IA.";
        }
    } catch (err) {
        console.error(err);
        document.getElementById('responseText').innerText = "Erro ao conectar com a API.";
    }
}

function copyResponse() {
    let text = document.getElementById('responseText').innerText;
    navigator.clipboard.writeText(text).then(() => {
        alert("Texto copiado!");
    });
}

function saveAll() {
    promptText = document.getElementById('prompt').value;
    apiKey = document.getElementById('apiKey').value;
    toggleDevPanel();
    alert("Configurações salvas!");
    // Você pode salvar no localStorage se quiser manter mesmo após recarregar a página
    localStorage.setItem("promptText", promptText);
    localStorage.setItem("apiKey", apiKey);
}

// Carrega dados salvos
window.onload = () => {
    if(localStorage.getItem("promptText")) promptText = localStorage.getItem("promptText");
    if(localStorage.getItem("apiKey")) apiKey = localStorage.getItem("apiKey");
}
</script>

</body>
  </html>
